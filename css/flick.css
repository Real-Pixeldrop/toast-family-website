/* ===========================================
   FLICK SECTION - Carousel de cartes draggable
   Style Truus Exact
   =========================================== */

/* ------------------------- Variables -------------------------------------------------- */

:root {
  --animation-ease: 0.4s cubic-bezier(0.25, 1, 0.5, 1);
  --animation-default-fast: 0.25s ease;
  --animation-bounce-fast: 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ------------------------- Flick Section -------------------------------------------------- */

.flick {
  padding: 6px 12px 12px 12px;
  overflow: hidden;
  position: relative;
}

.flick__tile {
  position: relative;
  padding-top: var(--section-padding, 12em);
  padding-bottom: 1em;
  background-color: var(--color-dark, black);
  color: var(--color-light, #F0EBE7);
  border-radius: 16px;
  overflow: hidden;
}

/* Grain Background */
.flick__tile::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: url('../assets/textures/grain.gif');
  background-size: 200px;
  background-repeat: repeat;
  opacity: 1;
  pointer-events: none;
  z-index: 1;
  border-radius: 16px;
}

/* Dark Overlay */
.flick__tile::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.92);
  pointer-events: none;
  z-index: 2;
  border-radius: 16px;
}

/* Ensure content is above grain */
.flick__tile > * {
  position: relative;
  z-index: 3;
}

/* ------------------------- Section Title -------------------------------------------------- */

.flick__row-title {
  text-align: center;
  margin-bottom: 1em;
}

.flick__heading {
  font-size: 4em;
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.02em;
  color: var(--color-light, #F0EBE7);
  margin: 0;
}

.flick__heading em {
  font-family: 'Fraunces', Georgia, 'Times New Roman', serif;
  font-style: italic;
  font-weight: 400;
}

/* ------------------------- Spacer -------------------------------------------------- */

.flick__spacer {
  height: 8em;
}

.flick__row-slider {
  justify-content: center;
  display: flex;
}

.flick-group {
  grid-column-gap: 1.5em;
  grid-row-gap: 1.5em;
  flex-flow: column;
  display: flex;
  position: relative;
}

.flick-group__top {
  position: relative;
}

.flick-group__collection {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

.flick-group__list {
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  display: flex;
  position: relative;
}

.flick-group__item {
  position: absolute;
  transition: var(--animation-bounce-fast);
}

.relative-object {
  opacity: 0;
  pointer-events: none;
  width: 47em;
  position: relative;
}

.relative-object__before {
  padding-top: 75%;
}

/* ------------------------- Flick Card -------------------------------------------------- */

.flick-card {
  border-radius: var(--border-radius-l, 1.25em);
  background-color: var(--color-dark, black);
  -webkit-user-select: none;
  user-select: none;
  width: 23.75em;
  position: relative;
}

.flick-card__before {
  padding-top: 150%;
}

.flick-card__media {
  border-radius: var(--border-radius-l, 1.25em);
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  overflow: hidden;
  transition: opacity var(--animation-ease);
  opacity: 0.5;
}

.flick-card__border {
  border: .375em solid var(--color-light, #F0EBE7);
  border-radius: var(--border-radius-l, 1.25em);
  pointer-events: none;
  width: calc(100% + 2px);
  height: calc(100% + 2px);
  position: absolute;
  top: -1px;
  left: -1px;
}

/* ------------------------- Video in Cards -------------------------------------------------- */

.flick-card__video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  transition: opacity 0.5s ease;
}

[data-flick-cards-item-status="active"] .flick-card__video {
  opacity: 1;
}

/* Hide poster image when video is playing (only if video exists) */
[data-flick-cards-item-status="active"] .flick-card__media:has(.flick-card__video) .flick-card__poster {
  opacity: 0;
}

.flick-card__poster {
  transition: opacity 0.5s ease;
}

/* ------------------------- Tag on Cards -------------------------------------------------- */

.flick-card__tag {
  text-align: center;
  justify-content: flex-start;
  display: flex;
  position: absolute;
  top: 1.5em;
  left: 1.5em;
  right: 1.5em;
}

.flick-card__tag.is--big {
  justify-content: center;
  top: auto;
  bottom: 0%;
  transform: translateY(50%);
}

.flick-card__tag .tag {
  transition: opacity var(--animation-default-fast), transform var(--animation-bounce-fast);
  opacity: 0;
  transform: translate(25%, 100%) rotate(10deg);
  transform-origin: right bottom;
}

/* ------------------------- Type Badge -------------------------------------------------- */

.type {
  grid-column-gap: .25em;
  grid-row-gap: .25em;
  border: .125em solid var(--color-dark, black);
  border-radius: var(--border-radius-s, .5em);
  background-color: var(--color-light, #F0EBE7);
  color: var(--color-dark, black);
  justify-content: center;
  align-items: center;
  padding: .625em 1em .625em .75em;
  display: flex;
}

.flick-group__type {
  display: flex;
  position: absolute;
  top: 17.5%;
  left: 100%;
  transform: translate(-50%, -50%);
}

.flick-group__type .type {
  transition: opacity var(--animation-default-fast), transform var(--animation-bounce-fast);
  opacity: 0;
  transform: translate(-50%, 25%) rotate(-15deg);
  transform-origin: left top;
}

.type__span {
  letter-spacing: -.02em;
  text-transform: lowercase;
  white-space: nowrap;
  font-weight: 600;
}

.type__icon {
  justify-content: center;
  align-items: center;
  width: 1.5em;
  height: 1.5em;
  display: flex;
  position: relative;
}

.type__icon-svg {
  width: 100%;
  height: 100%;
}

/* ------------------------- Sticker on Cards -------------------------------------------------- */

.flick-group__sticker {
  width: 6.25em;
  position: absolute;
  top: 75%;
  left: 3%;
  transform: translate(-50%, -50%) rotate(-10deg);
}

.flick-group__sticker .sticker {
  transition: opacity var(--animation-default-fast), transform var(--animation-bounce-fast);
  opacity: 0;
  transform: translate(0%, 25%) scale(0) rotate(15deg);
}

.sticker {
  justify-content: center;
  align-items: center;
  width: 100%;
  display: flex;
  position: relative;
}

.sticker__svg {
  width: 100%;
  max-width: none;
  display: block;
  position: relative;
}

/* ------------------------- Blobs & Scribbles -------------------------------------------------- */

.flick-group__blob-back-svg {
  pointer-events: none;
  width: 28.125em;
  position: absolute;
  top: 72%;
  left: 79%;
  transform: translate(-50%, -50%);
}

.flick-group__blob-scribble-svg {
  pointer-events: none;
  width: 6.75em;
  position: absolute;
  top: 19%;
  left: -7%;
  transform: translate(-50%, -50%);
  color: var(--color-light, #F0EBE7);
}

/* Line draw animation - auto draw on load */
@keyframes drawScribble {
  from {
    stroke-dashoffset: 300;
  }
  to {
    stroke-dashoffset: 0;
  }
}

.flick-group__blob-scribble-svg path {
  stroke-dasharray: 300;
  stroke-dashoffset: 0;
  animation: drawScribble 1.5s ease-out forwards;
  animation-delay: 0.5s;
}

/* ------------------------- Bottom Info -------------------------------------------------- */

.flick-group__bottom {
  justify-content: center;
  display: flex;
}

.flick-info-item {
  color: unset;
  flex-flow: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  text-decoration: none;
  display: flex;
}

.flick-info-item__top {
  text-align: center;
  flex-flow: column;
  justify-content: center;
  align-items: center;
  height: 5em;
  display: flex;
}

.flick-info-item__h3 {
  text-wrap: balance;
  font-size: 2em;
  margin: 0;
}

.flick-info-item__bottom {
  flex: none;
  position: relative;
}

.link-cta {
  border-bottom: 2px solid currentColor;
  padding-bottom: 0.25em;
  text-decoration: none;
  color: inherit;
  font-weight: 500;
  transition: opacity 0.3s ease;
}

/* ------------------------- Preview Stack (Voir tous les projets hover) -------------------------------------------------- */

.flick-preview-stack {
  position: fixed;
  top: 0;
  left: 0;
  width: 90px;
  height: 120px;
  pointer-events: none;
  opacity: 0;
  z-index: 9999;
  transition: opacity 0.2s ease;
}

.flick-preview-stack.is-visible {
  opacity: 1;
}

.flick-preview-img {
  position: absolute;
  width: 90px;
  height: 120px;
  object-fit: cover;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  opacity: 0;
  transform: rotate(0deg) scale(0.8);
  transition: opacity 0.15s ease, transform 0.15s ease;
  border: 3px solid var(--color-light, #F0EBE7);
}

.flick-preview-img.is-active {
  opacity: 1;
  transform: rotate(var(--rotation, 0deg)) scale(1);
  z-index: var(--z-index, 1);
}

/* Stacked effect - each image gets slight rotation */
.flick-preview-img:nth-child(1) { --rotation: -10deg; }
.flick-preview-img:nth-child(2) { --rotation: 6deg; }
.flick-preview-img:nth-child(3) { --rotation: -4deg; }
.flick-preview-img:nth-child(4) { --rotation: 8deg; }
.flick-preview-img:nth-child(5) { --rotation: -7deg; }
.flick-preview-img:nth-child(6) { --rotation: 5deg; }

.link-cta:hover {
  opacity: 0.7;
}

/* ------------------------- Active State Styles -------------------------------------------------- */

[data-flick-cards-item-status="active"] .flick-card__media {
  opacity: 1;
}

[data-flick-cards-item-status="active"] .flick-card__tag .tag {
  opacity: 1;
  transform: translate(0%, 0%) rotate(0.001deg);
}

[data-flick-cards-item-status="active"] .flick-group__type .type {
  opacity: 1;
  transform: translate(0%, 0%) rotate(0.001deg);
}

[data-flick-cards-item-status="active"] .flick-group__sticker .sticker {
  opacity: 1;
  transform: translate(0%, 0%) scale(1) rotate(0.001deg);
}

/* Before/After states opacity */
[data-flick-cards-item-status="3-before"] .flick-card__media,
[data-flick-cards-item-status="3-after"] .flick-card__media {
  opacity: 0.35;
}

/* ------------------------- Dragger -------------------------------------------------- */

.flick-group__dragger {
  z-index: 100;
  -webkit-user-select: none;
  user-select: none;
  touch-action: pan-y;
  background-color: transparent;
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  cursor: url('../assets/cursors/cursor-drag.svg') 12 0, grab;
}

[data-flick-drag-status="grabbing"] .flick-group__dragger {
  cursor: url('../assets/cursors/cursor-dragging.svg') 12 0, grabbing;
}

/* ------------------------- RESPONSIVE -------------------------------------------------- */

@media screen and (max-width: 991px) {
  .flick__heading {
    font-size: 3em;
  }

  .flick__spacer {
    height: 6em;
  }

  .flick-card {
    width: 18em;
  }

  .relative-object {
    width: 36em;
  }

  .flick-group__blob-back-svg {
    width: 22em;
  }

  .flick-group__blob-scribble-svg {
    width: 5em;
  }

  .flick-group__sticker {
    width: 5em;
  }

  .flick-info-item__h3 {
    font-size: 1.5em;
  }
}

@media screen and (max-width: 767px) {
  .flick {
    padding-top: var(--section-padding, 6em);
    padding-bottom: var(--section-padding, 6em);
  }

  .flick__heading {
    font-size: 2em;
  }

  .flick__spacer {
    height: 4em;
  }

  .flick-card {
    width: 14em;
  }

  .relative-object {
    width: 28em;
  }

  .flick-group__blob-back-svg {
    width: 16em;
  }

  .flick-group__blob-scribble-svg {
    width: 4em;
    left: -5%;
  }

  .flick-group__sticker {
    width: 4em;
  }

  .flick-group__type {
    display: none;
  }

  .flick-info-item__h3 {
    font-size: 1.25em;
  }

  /* Hide preview stack on mobile */
  .flick-preview-stack {
    display: none;
  }
}

@media screen and (max-width: 479px) {
  .flick__heading {
    font-size: 1.5em;
  }

  .flick__spacer {
    height: 3em;
  }

  .flick-card {
    width: 11em;
  }

  .relative-object {
    width: 22em;
  }

  .flick-group__blob-back-svg {
    width: 12em;
  }

  .flick-group__blob-scribble-svg {
    display: none;
  }

  .flick-group__sticker {
    width: 3em;
  }

  .flick-info-item__h3 {
    font-size: 1em;
  }
}

/* ===========================================
   SCROLL REVEAL ANIMATIONS - Section Flick
   =========================================== */

/* État initial - Titre */
.flick [data-scroll-reveal="title"] {
  opacity: 0;
  transform: translateY(40px);
  transition: opacity 0.7s ease, transform 0.7s ease;
}

.flick [data-scroll-reveal="title"].is-visible {
  opacity: 1;
  transform: translateY(0);
}

/* État initial - Cartes (cascade avec effet éventail) */
.flick [data-scroll-reveal="cards"] {
  opacity: 0;
  transform: scale(0.85);
  transition: opacity 0.8s ease, transform 0.8s cubic-bezier(0.25, 1, 0.5, 1);
  transition-delay: 0.2s;
}

.flick [data-scroll-reveal="cards"].is-visible {
  opacity: 1;
  transform: scale(1);
}

/* État initial - Blob (forme verte) - utilise scale séparé pour ne pas casser le positionnement */
.flick [data-scroll-reveal="blob"] {
  opacity: 0;
  transition: opacity 0.6s ease, transform 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
  transition-delay: 0.1s;
}

.flick [data-scroll-reveal="blob"].is-visible {
  opacity: 1;
}

/* État initial - Bottom info (badge + lien) */
.flick [data-scroll-reveal="info"] {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity 0.6s ease, transform 0.6s ease;
  transition-delay: 0.5s;
}

.flick [data-scroll-reveal="info"].is-visible {
  opacity: 1;
  transform: translateY(0);
}
